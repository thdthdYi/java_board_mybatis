<!---글작성페이지---->

<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>작성페이지</title>
</head>
<body>
<!--action속성: 목적지(서버주소), method속성: http request method(get, post)-->
<form action="/board/page" method="post" enctype="multipart/form-data">
  writer: <input type="text" name="boardWriter"> <br>
  pass: <input type="text" name="boardPass"> <br>
  title: <input type="text" name="boardTitle"> <br>
  contents: <textarea name="boardContents" cols="30" rows="10"></textarea> <br>
</form>
<button type="button"  onclick="savePost();" >저장</button>
<a th:href="@{/board/page}">뒤로</a>
</body>

<th:block layout:fragment="script">

    <!--자바 스크립트 내에서 타임리프 문법 사용-->
    <script th:inline="javascript">
        /*<![CDATA[*/

            window.onload = () => {
                initCreatedDate();
            }


            // 등록일 초기화
            function initCreatedDate() {
                document.getElementById('createdDate').value = dayjs().format('YYYY-MM-DD');
            }


            // 게시글 저장(수정)
            function savePost() {
                const form = document.getElementById('saveForm');
                const fields = [form.title, form.writer, form.content];
                const fieldNames = ['제목', '이름', '내용'];

                for (let i = 0, len = fields.length; i < len; i++) {
                    isValid(fields[i], fieldNames[i]);
                }

                document.getElementById('saveBtn').disabled = true;
                form.noticeYn.value = form.isNotice.checked;
                form.action = [[ ${post == null} ]] ? '/board/save' : '/board/update';
                form.submit();
            }

        /*]]>*/
        </script>
</th:block>
</html>